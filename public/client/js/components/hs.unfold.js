(function(a){'use strict';function b(){return"ontouchstart"in window}function c(b,c){var d=this;return!!b.length&&(d.element=b,d.config=c,d.target=a(d.element.data("unfold-target")),d.allInvokers=a("[data-unfold-target=\""+d.element.data("unfold-target")+"\"]"),d.toggle=function(){if(!d.target.length)return d;var b=d.element[0].dataset,c=!!b.unfoldOverlay&&JSON.parse(b.unfoldOverlay);return d.defaultState?(b.unfoldOverlay&&(!a("."+c.className).length&&a("<div class=\""+c.className+"\" style=\"background-color: "+c.background+"\"></div>").prependTo("body"),a("."+c.className).length&&a("."+c.className).fadeIn(c.animationSpeed?c.animationSpeed:200)),d.show()):(a("."+c.className).length&&(d.config.unfoldTimeOut=setTimeout(function(){a("."+c.className).fadeOut(c.animationSpeed?c.animationSpeed:200)},d.config.unfoldDelay)),d.hide()),d},this.smartPosition=function(b){b.data("baseDirection")&&b.css(b.data("baseDirection").direction,b.data("baseDirection").value),b.removeClass("u-unfold--reverse-y");var c=a(window),d=getComputedStyle(b.get(0)),e=40>Math.abs(parseInt(d.left,10))?"left":"right",f=b.offset();"right"==e?(!b.data("baseDirection")&&b.data("baseDirection",{direction:"right",value:parseInt(d.right,10)}),0>f.left&&b.css("right",-1*(parseInt(b.css("right"),10)-(f.left-10)))):(!b.data("baseDirection")&&b.data("baseDirection",{direction:"left",value:parseInt(d.left,10)}),f.left+b.outerWidth()>c.width()&&b.css("left",parseInt(b.css("left"),10)-(f.left+b.outerWidth()+10-c.width()))),f.top+b.outerHeight()-c.scrollTop()>c.height()&&b.addClass("u-unfold--reverse-y")},this.getOption=function(a){return this.config[a]?this.config[a]:null},!0)}function d(a,b){c.call(this,a,b)&&(Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}}),this.target.addClass("u-unfold--simple"),this.hide())}function e(a,b){if(c.call(this,a,b)){var d=this;this.target.addClass("u-unfold--css-animation u-unfold--hidden").css("animation-duration",d.config.unfoldDuration+"ms"),Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}}),this.target.length&&this.target.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(a){d.target.hasClass(d.config.unfoldAnimationOut)&&(d.target.removeClass(d.config.unfoldAnimationOut).addClass("u-unfold--hidden"),d.allInvokers.length&&d.allInvokers.attr("aria-expanded","false"),d.config.afterClose.call(d.target,d.element)),d.target.hasClass(d.config.unfoldAnimationIn)&&(d.allInvokers.length&&d.allInvokers.attr("aria-expanded","true"),d.config.afterOpen.call(d.target,d.element)),a.preventDefault(),a.stopPropagation()})}}function f(a,b){c.call(this,a,b)&&(this.target.addClass("u-unfold--jquery-slide u-unfold--hidden").hide(),Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}}))}a.HSCore.components.HSUnfold={_baseConfig:{unfoldEvent:"click",unfoldType:"simple",unfoldDuration:300,unfoldEasing:"linear",unfoldAnimationIn:"fadeIn",unfoldAnimationOut:"fadeOut",unfoldHideOnScroll:!0,unfoldHideOnBlur:!1,unfoldDelay:350,unfoldOpenedElement:"init",unfoldOverlay:!1,afterOpen:function(){},beforeClose:function(){},afterClose:function(){}},_pageCollection:a(),init:function(b,c){var g;if(b&&b.length){g=this;var h;return b.each(function(b,i){var j,k=a(i);if(!k.data("HSUnfold")){switch(j=c&&a.isPlainObject(c)?a.extend(!0,{},g._baseConfig,c,k.data()):a.extend(!0,{},g._baseConfig,k.data()),j.unfoldType){case"css-animation":k.data("HSUnfold",new e(k,j));break;case"jquery-slide":k.data("HSUnfold",new f(k,j));break;default:k.data("HSUnfold",new d(k,j));}g._pageCollection=g._pageCollection.add(k),g._bindEvents(k,j.unfoldEvent,j.unfoldDelay);var l=a(i).data("HSUnfold");h=a(l.target).find("input, textarea").length,a(l.target).find("[data-unfold-target]").length&&k.addClass("target-of-invoker-has-unfolds")}}),a(document).on("click touchstart","body",function(b){b.target.id===g._baseConfig.unfoldOpenedElement||a(b.target).closest("#"+g._baseConfig.unfoldOpenedElement).length||g._pageCollection.each(function(b,c){var d=window.innerWidth,e=!!a(c).data("is-mobile-only");e?e&&769>d&&a(c).data("HSUnfold").hide():a(c).data("HSUnfold").hide(),a(c).data("HSUnfold").config.unfoldOverlay&&(a(c).data("HSUnfold").config.unfoldDelay=setTimeout(function(){a("."+a(c).data("HSUnfold").config.unfoldOverlay.className).fadeOut(a(c).data("HSUnfold").config.unfoldOverlay.animationSpeed?a(c).data("HSUnfold").config.unfoldOverlay.animationSpeed:200)},a(c).data("HSUnfold").config.unfoldDelay)),a(c).data("HSUnfold").config.beforeClose.call(g.target,g.element)})}),a(window).on("scroll.HSUnfold",function(){g._pageCollection.each(function(b,c){var d=a(c).data("HSUnfold");d.getOption("unfoldHideOnScroll")&&0===h?d.hide():d.getOption("unfoldHideOnScroll")&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&d.hide()})}),a(window).on("resize.HSUnfold",function(){g._resizeTimeOutId&&clearTimeout(g._resizeTimeOutId),g._resizeTimeOutId=setTimeout(function(){g._pageCollection.each(function(b,c){var d=a(c).data("HSUnfold");d.smartPosition(d.target)})},50)}),a(document).on("keydown.HSUnfold",function(b){a("body").hasClass("u-unfold-opened")&&((b.keyCode&&38===b.keyCode||b.keyCode&&40===b.keyCode)&&b.preventDefault(),b.keyCode&&27===b.keyCode&&(g._pageCollection.each(function(b,c){a(c).data("HSUnfold").hide()}),a("body").removeClass("u-unfold-opened")))}),b}},_bindEvents:function(c,d,e){var f=this,g=a(c.data("unfold-target"));if("hover"===d&&!b())c.on("mouseenter.HSUnfold",function(){var b=a(this),c=b.data("HSUnfold");c&&(c.unfoldTimeOut&&clearTimeout(c.unfoldTimeOut),c.show(),a("body").addClass("u-unfold-opened"))}).on("mouseleave.HSUnfold",function(){var b=a(this),c=b.data("HSUnfold");c&&(c.unfoldTimeOut=setTimeout(function(){c.hide(),a("body").removeClass("u-unfold-opened")},e))}),g.length&&g.on("mouseenter.HSUnfold",function(){var a=c.data("HSUnfold");a.unfoldTimeOut&&clearTimeout(a.unfoldTimeOut),a.show()}).on("mouseleave.HSUnfold",function(){var a=c.data("HSUnfold");a.unfoldTimeOut=setTimeout(function(){a.hide()},e)});else if(c.on("click.HSUnfold",function(b){var c=a(this),d=a("[data-unfold-target].active:not(.target-of-invoker-has-unfolds)"),e=a("[data-unfold-target].active.target-of-invoker-has-unfolds");f._baseConfig.unfoldOpenedElement=c.data("HSUnfold").target[0].id,c.data("HSUnfold")&&(c.hasClass("target-of-invoker-has-unfolds")?e.length&&e.data("HSUnfold").toggle():d.length&&d.data("HSUnfold").toggle(),c.data("HSUnfold").toggle(),a("body").toggleClass("u-unfold-opened"),b.stopPropagation(),b.preventDefault())}),!!c.data("unfold-target-is-menu")){var h=a(c.data("unfold-target")),i=h.children();i.on("click",function(){c.data("HSUnfold").toggle()})}}},d.prototype.show=function(){var b=a(this)[0].config.unfoldTarget;return a("[data-unfold-target=\""+b+"\"]").addClass("active"),this.smartPosition(this.target),this.target.removeClass("u-unfold--hidden"),this.allInvokers.length&&this.allInvokers.attr("aria-expanded","true"),this.config.afterOpen.call(this.target,this.element),this},d.prototype.hide=function(){var b=a(this)[0].config.unfoldTarget;return a("[data-unfold-target=\""+b+"\"]").removeClass("active"),this.target.addClass("u-unfold--hidden"),this.allInvokers.length&&this.allInvokers.attr("aria-expanded","false"),this.config.afterClose.call(this.target,this.element),this},e.prototype.show=function(){var b=this,c=a(b)[0].config.unfoldTarget;a("[data-unfold-target=\""+c+"\"]").addClass("active"),b.smartPosition(b.target),b.target.removeClass("u-unfold--hidden").removeClass(b.config.unfoldAnimationOut),b.config.unfoldOverlay?setTimeout(function(){b.target.addClass(b.config.unfoldAnimationIn)}):b.target.addClass(b.config.unfoldAnimationIn),b.config.afterOpen.call(b.target,b.element)},e.prototype.hide=function(){var b=a(this)[0].config.unfoldTarget;a("[data-unfold-target=\""+b+"\"]").removeClass("active"),this.target.removeClass(this.config.unfoldAnimationIn).addClass(this.config.unfoldAnimationOut)},f.prototype.show=function(){var b=this,c=a(this)[0].config.unfoldTarget;a("[data-unfold-target=\""+c+"\"]").addClass("active"),this.smartPosition(this.target),this.target.removeClass("u-unfold--hidden").stop().slideDown({duration:b.config.unfoldDuration,easing:b.config.unfoldEasing,complete:function(){b.config.afterOpen.call(b.target,b.element)}})},f.prototype.hide=function(){var b=this,c=a(this)[0].config.unfoldTarget;a("[data-unfold-target=\""+c+"\"]").removeClass("active"),this.target.slideUp({duration:b.config.unfoldDuration,easing:b.config.unfoldEasing,complete:function(){b.config.afterClose.call(b.target,b.element),b.target.addClass("u-unfold--hidden")}})}})(jQuery);