(function(a){'use strict';function b(b,c){this.element=b,this.config=c,this._items=a(),this._makeItems(),this._bindEvents()}function c(b,c){var d=this;this.element=b,this.config=c,Object.defineProperty(this,"section",{value:a(d.element.attr("href"))}),Object.defineProperty(this,"offset",{get:function(){var a=c.parent,b=getComputedStyle(a.get(0)),e=b.position,f=d.section.offset().top;return a.length&&"fixed"==e&&0==parseInt(b.top)&&(f=f-a.outerHeight()-parseInt(b.marginTop)),d.config.over.length&&(f-=d.config.over.outerHeight()),f}})}a.HSCore.components.HSScrollNav={_baseConfig:{duration:400,easing:"linear",over:a(),sectionClass:"u-scroll-nav-section",customOffsetTop:0,activeItemClass:"active",activeSectionClass:"active",afterShow:function(){},beforeShow:function(){},parent:a(".u-header")},_pageCollection:a(),init:function(c,d){var e=this;return c&&c.length?(c.each(function(c,f){var g=a(f),h=d&&a.isPlainObject(d)?a.extend(!0,{},e._baseConfig,d,g.data()):a.extend(!0,{},e._baseConfig,g.data());g.data("HSScrollNav")||(g.data("HSScrollNav",new b(g,h)),e._pageCollection=e._pageCollection.add(g))}),a(window).on("scroll.HSScrollNav",function(){e._pageCollection.each(function(b,c){a(c).data("HSScrollNav").highlight()})}).trigger("scroll.HSScrollNav"),c):a()}},b.prototype._makeItems=function(){var b=this;this.element.find("a[href^=\"#\"]").each(function(d,e){var f=a(e);f.data("HSScrollNavSection")||(f.data("HSScrollNavSection",new c(f,b.config)),b._items=b._items.add(f))})},b.prototype._bindEvents=function(){var b=this;this.element.on("click.HSScrollNav","a[href^=\"#\"]",function(c){var d=this,e=a(this).data("HSScrollNavSection"),f=a(b.element).parent(),g=f.attr("id"),h=window.innerWidth,i=!!b.element[0].dataset.mobileDestroy;769>=h&&!0===i?(a("[data-target=\"#"+g+"\"]").trigger("click"),a("[data-target=\"#"+g+"\"] > .u-hamburger__box").removeClass("is-active"),f.on("hidden.bs.collapse",function(){b._lockHightlight=!0,b.current&&b.current.unhighlight(),d.blur(),b.current=a(d).data("HSScrollNavSection"),b.current.highlight(),e.show(function(){b._lockHightlight=!1})})):(b._lockHightlight=!0,b.current&&b.current.unhighlight(),d.blur(),b.current=a(d).data("HSScrollNavSection"),b.current.highlight(),e.show(function(){b._lockHightlight=!1})),c.preventDefault()})},b.prototype.highlight=function(){var b,c,d=this;if(this._items.length&&!this._lockHightlight)return c=a(window).scrollTop(),c+a(window).height()===a(document).height()?(this.current=this._items.last().data("HSScrollNavSection"),this.unhighlight(),this.current.highlight(),void this.current.changeHash()):void(this._items.each(function(d,e){var f=a(e).data("HSScrollNavSection"),g=f.section;c>f.offset&&(b=f)}),b&&this.current!==b&&(this.unhighlight(),b.highlight(),this.current&&b.changeHash(),this.current=b))},b.prototype.unhighlight=function(){this._items.each(function(b,c){a(c).data("HSScrollNavSection").unhighlight()})},c.prototype.show=function(b){var c=this;this.section.length&&(c.config.beforeShow.call(c.section),this.changeHash(),a("html, body").stop().animate({scrollTop:c.offset+c.config.customOffsetTop},{duration:c.config.duration,easing:c.config.easing,complete:function(){a("html, body").stop().animate({scrollTop:c.offset+c.config.customOffsetTop},{duration:c.config.duration,easing:c.config.easing,complete:function(){c.config.afterShow.call(c.section),a.isFunction(b)&&b()}})}}))},c.prototype.changeHash=function(){this.section.attr("id",""),a(this.config.sectionClass).removeClass(this.config.activeSectionClass),this.section.addClass(this.config.activeSectionClass),window.location.hash=this.element.attr("href"),this.section.attr("id",this.element.attr("href").slice(1))},c.prototype.highlight=function(){var a=this.element.parent("li");a.length&&a.addClass(this.config.activeItemClass)},c.prototype.unhighlight=function(){var a=this.element.parent("li");a.length&&a.removeClass(this.config.activeItemClass)}})(jQuery);